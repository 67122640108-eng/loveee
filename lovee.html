<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Valentine Day üíñ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Prompt', sans-serif;
}

/* Floating hearts */
.heart-float {
    position: absolute;
    bottom: -20px;
    animation: floatUp 6s linear infinite;
    pointer-events: none;
}

@keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 0; }
    10% { opacity: 0.8; }
    100% { transform: translateY(-100%) scale(1.4) rotate(15deg); opacity: 0; }
}

/* Beat heart */
@keyframes beat {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

.beat {
    animation: beat 1.2s infinite;
}

/* Shimmer text */
@keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
}

.shimmer-text {
    background: linear-gradient(90deg, #ff4d6d, #ff8fa3, #ffb6c1, #ff8fa3, #ff4d6d);
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 3s linear infinite;
}

/* Sparkle animation */
@keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
}

.sparkle {
    animation: sparkle 2s ease-in-out infinite;
}

/* Confetti */
.confetti {
    position: fixed;
    pointer-events: none;
    z-index: 40;
}

@keyframes confettiFall {
    0% {
        transform: translateY(-100%) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

.confetti-falling {
    animation: confettiFall 3s linear forwards;
}

/* Toast message */
.toast {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    animation: slideUp 0.3s ease-out forwards;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Wiggle animation */
@keyframes wiggle {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
}

.wiggle {
    animation: wiggle 0.4s ease-in-out;
}

/* Slide in animation */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-in {
    animation: slideIn 0.5s ease-out forwards;
}

.card-shadow {
    box-shadow: 0 25px 50px -12px rgba(255, 77, 109, 0.2);
}

.image-upload-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.5);
    border-radius: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
    cursor: pointer;
}

.image-container:hover .image-upload-overlay {
    opacity: 1;
}
</style>
  <style>body { box-sizing: border-box; }</style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="m-0">
  <div id="app-wrapper" class="relative h-full w-full flex items-center justify-center overflow-auto" style="background: linear-gradient(135deg,#fff0f3,#ffb6c1,#ff8fa3);"><!-- Hearts container -->
   <div id="hearts" class="absolute inset-0 pointer-events-none overflow-hidden"></div><!-- Toast container -->
   <div id="toast-container" class="fixed inset-0 pointer-events-none"></div><!-- Hidden file input --> <input type="file" id="imageInput" accept="image/*" style="display:none;" onchange="handleImageUpload(event)"> <!-- PAGE 1 -->
   <div id="page1" class="page absolute inset-0 flex items-center justify-center p-4">
    <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-8 w-full max-w-sm text-center card-shadow slide-in">
     <div class="text-7xl beat mb-4">
      ‚ù§Ô∏è
     </div>
     <h1 class="text-4xl font-bold shimmer-text mb-2">Happy Valentine</h1>
     <p class="text-gray-600 mb-6 text-lg">‡∏ñ‡∏∂‡∏á <span id="name-page1" class="font-bold text-pink-500">‡∏≠‡πâ‡∏ß‡∏ô</span> ‡∏Ñ‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏π üíï</p>
     <div class="image-container relative mb-6 cursor-pointer" onclick="triggerImageUpload()">
      <div id="imageDisplay" class="w-full h-48 rounded-2xl overflow-hidden shadow-lg object-cover" style="background: linear-gradient(135deg, #fce4ec, #f8bbd9);">
       <div id="imagePlaceholder" class="w-full h-full flex items-center justify-center">
        <div class="text-center">
         <div class="text-6xl mb-2">
          üíë
         </div>
         <p class="text-pink-400 text-sm">‡∏£‡∏π‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>
        </div>
       </div><img id="previewImage" src="https://ibb.co/NdLXsKmB" style="display:block; width:100%; height:100%; object-fit:cover;">
      </div>
     </div><button onclick="goPage(2)" class="w-full py-4 px-6 rounded-full text-white font-semibold text-lg hover:shadow-lg transition-all" style="background:linear-gradient(135deg,#ff4d6d,#ff8fa3)"> ‡∏Å‡∏î‡∏î‡∏π‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå üíñ </button>
    </div>
   </div><!-- PAGE 2 -->
   <div id="page2" class="page hidden absolute inset-0 flex items-center justify-center p-4">
    <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-8 w-full max-w-sm text-center card-shadow slide-in">
     <div class="text-5xl mb-4">
      üíç
     </div>
     <h2 id="name-page2" class="text-2xl font-bold text-pink-500 mb-4">‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå‡∏ô‡∏∞‡∏≠‡πâ‡∏ß‡∏ô</h2>
     <p id="love-msg" class="text-gray-600 mb-6 leading-relaxed text-lg">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•‡∏´‡∏ô‡∏π‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢<br>
       ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô ‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡πà‡∏ß‡∏á<br>
       ‡πÅ‡∏•‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Ñ‡∏≠‡∏¢‡∏´‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏π‡∏ï‡∏•‡∏≠‡∏î<br>
       ‡∏´‡∏ô‡∏π‡∏£‡∏±‡∏Å‡∏≠‡πâ‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡∏≠‡πâ‡∏ß‡∏ô<br>
       ‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏•‡∏¢‡∏Ñ‡πâ‡∏≤‡∏ö üíï</p>
     <div class="bg-gradient-to-r from-pink-100 to-rose-100 rounded-2xl p-4 mb-6">
      <h3 id="question" class="text-xl font-bold text-pink-600">‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°? üíç</h3>
     </div>
     <div class="flex gap-3"><button onclick="sayYes()" class="flex-1 py-4 rounded-full text-white font-semibold hover:shadow-lg transition-all" style="background:linear-gradient(135deg,#ff4d6d,#ff8fa3)"> ‡∏ï‡∏Å‡∏•‡∏á üíñ </button> <button id="no-btn" onclick="sayNo()" class="flex-1 py-4 rounded-full border-2 border-pink-300 text-pink-500 font-semibold hover:bg-pink-50 transition-all"> ‡πÑ‡∏°‡πà‡∏≠‡∏∞ üò≥ </button>
     </div>
    </div>
   </div><!-- PAGE 3 -->
   <div id="page3" class="page hidden absolute inset-0 flex items-center justify-center p-4">
    <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-8 w-full max-w-sm text-center card-shadow slide-in">
     <div class="text-7xl beat mb-4">
      üíñ
     </div>
     <h1 class="text-4xl font-bold shimmer-text mb-4">‡πÄ‡∏¢‡πâ!!!</h1>
     <p class="text-gray-600 text-lg">‡∏´‡∏ô‡∏π‡∏î‡∏µ‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢ ü•∞<br><span id="final-msg" class="font-bold text-pink-500">‡∏£‡∏±‡∏Å‡∏≠‡πâ‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏ô‡∏∞ üíï</span></p>
     <div class="mt-8 flex justify-center gap-3 text-4xl"><span class="sparkle" style="animation-delay: 0s;">üíï</span> <span class="sparkle" style="animation-delay: 0.3s;">üíó</span> <span class="sparkle" style="animation-delay: 0.6s;">üíñ</span>
     </div><button onclick="restart()" class="mt-8 py-3 px-6 rounded-full border-2 border-pink-300 text-pink-500 font-semibold hover:bg-pink-50 transition-all"> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà üîÑ </button>
    </div>
   </div>
  </div>
  <script>
const defaultConfig = {
  recipient_name: '‡∏≠‡πâ‡∏ß‡∏ô',
  love_message: '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏î‡∏π‡πÅ‡∏•‡∏´‡∏ô‡∏π‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢\n‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô ‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡πà‡∏ß‡∏á\n‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Ñ‡∏≠‡∏¢‡∏´‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡∏π‡∏ï‡∏•‡∏≠‡∏î\n‡∏´‡∏ô‡∏π‡∏£‡∏±‡∏Å‡∏≠‡πâ‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡∏≠‡πâ‡∏ß‡∏ô\n‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏•‡∏¢‡∏Ñ‡πâ‡∏≤‡∏ö üíï',
  question_text: '‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ü‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°? üíç'
};

let noClickCount = 0;

function goPage(n){
  document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
  document.getElementById('page' + n).classList.remove('hidden');
}

function sayYes() {
  goPage(3);
  createConfetti();
}

function sayNo() {
  noClickCount++;
  const btn = document.getElementById('no-btn');
  btn.classList.add('wiggle');
  setTimeout(() => btn.classList.remove('wiggle'), 400);
  
  const messages = [
    '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏∞ üòùüíó',
    '‡∏Ñ‡∏¥‡∏î‡∏î‡∏µ‡πÜ ‡∏ô‡∏∞ ü•∫üíï',
    '‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏´‡∏£‡∏≠~ üò¢üíî',
    '‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≤ üôàüíñ',
    '‡∏Å‡∏î‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞ ü•π‚ú®'
  ];
  
  showToast(messages[Math.min(noClickCount - 1, messages.length - 1)]);
  
  const currentScale = parseFloat(btn.style.transform?.match(/scale\(([^)]+)\)/)?.[1] || 1);
  if (currentScale > 0.5) {
    btn.style.transform = `scale(${currentScale - 0.1})`;
  }
}

function showToast(message) {
  const container = document.getElementById('toast-container');
  const existing = container.querySelector('.toast');
  if (existing) existing.remove();
  
  const toast = document.createElement('div');
  toast.className = 'toast bg-white rounded-2xl px-6 py-4 card-shadow border border-pink-200';
  toast.innerHTML = `<p class="text-pink-500 font-semibold text-lg m-0">${message}</p>`;
  container.appendChild(toast);
  
  setTimeout(() => toast.remove(), 2500);
}

function createConfetti() {
  const container = document.getElementById('app-wrapper');
  const chars = ['üéä', 'üéâ', 'üíñ', 'üíï', '‚ú®', 'ü©∑', 'üíó', 'üíù'];
  
  for (let i = 0; i < 40; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.className = 'confetti confetti-falling';
      confetti.innerHTML = chars[Math.floor(Math.random() * chars.length)];
      confetti.style.left = Math.random() * 100 + '%';
      confetti.style.fontSize = (24 + Math.random() * 24) + 'px';
      confetti.style.animationDuration = (2.5 + Math.random() * 1.5) + 's';
      confetti.style.animationDelay = Math.random() * 0.5 + 's';
      container.appendChild(confetti);
      
      setTimeout(() => confetti.remove(), 5000);
    }, i * 80);
  }
}

function restart() {
  noClickCount = 0;
  document.getElementById('no-btn').style.transform = 'scale(1)';
  goPage(1);
}

function triggerImageUpload() {
  document.getElementById('imageInput').click();
}

function handleImageUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  
  const reader = new FileReader();
  reader.onload = function(e) {
    const img = document.getElementById('previewImage');
    const placeholder = document.getElementById('imagePlaceholder');
    const imageData = e.target.result;
    
    img.src = imageData;
    img.style.display = 'block';
    placeholder.style.display = 'none';
    
    // ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏•‡∏á‡πÉ‡∏ô localStorage ‡πÉ‡∏´‡πâ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
    localStorage.setItem('valentineImage', imageData);
  };
  reader.readAsDataURL(file);
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å localStorage ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
function loadSavedImage() {
  const savedImage = localStorage.getItem('valentineImage');
  if (savedImage) {
    const img = document.getElementById('previewImage');
    const placeholder = document.getElementById('imagePlaceholder');
    
    img.src = savedImage;
    img.style.display = 'block';
    placeholder.style.display = 'none';
  }
}

function updateUI(config) {
  const name = config.recipient_name || defaultConfig.recipient_name;
  const message = config.love_message || defaultConfig.love_message;
  const question = config.question_text || defaultConfig.question_text;
  
  document.getElementById('name-page1').textContent = name;
  document.getElementById('name-page2').textContent = name;
  document.getElementById('love-msg').innerHTML = message.replace(/\n/g, '<br>');
  document.getElementById('question').textContent = question;
  document.getElementById('final-msg').textContent = `‡∏£‡∏±‡∏Å${name}‡∏°‡∏≤‡∏Å‡∏ô‡∏∞ üíï`;
}

/* Hearts animation */
function createHeart(){
  const h = document.createElement('div');
  h.className = 'heart-float';
  const hearts = ['‚ù§Ô∏è', 'üíï', 'üíó', 'üíñ', 'üß°', 'ü©∑', 'ü§ç'];
  h.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
  h.style.left = Math.random() * 100 + '%';
  h.style.fontSize = (16 + Math.random() * 28) + 'px';
  h.style.opacity = 0.6 + Math.random() * 0.4;
  document.getElementById('hearts').appendChild(h);
  setTimeout(() => h.remove(), 6500);
}

setInterval(createHeart, 400);

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
document.addEventListener('DOMContentLoaded', loadSavedImage);

/* Element SDK */
if (window.elementSdk) {
  window.elementSdk.init({
    defaultConfig,
    onConfigChange: async (config) => {
      updateUI(config);
    },
    mapToCapabilities: (config) => ({
      recolorables: [],
      borderables: [],
      fontEditable: undefined,
      fontSizeable: undefined
    }),
    mapToEditPanelValues: (config) => new Map([
      ['recipient_name', config.recipient_name || defaultConfig.recipient_name],
      ['love_message', config.love_message || defaultConfig.love_message],
      ['question_text', config.question_text || defaultConfig.question_text]
    ])
  });
} else {
  updateUI(defaultConfig);
}
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cccade4a74c4496',t:'MTc3MDkwNTUyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>